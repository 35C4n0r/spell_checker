# Load data
import json
import time
from typing import List

from ahocode import Automaton
from sdsc import SymmetricDeleteSpellingCorrection


class SpellChecker:
    def __init__(self):
        self.spell_checker = SymmetricDeleteSpellingCorrection(longest_edit_distance=2,
                                                               word_dictionary=self.load_words())

    @staticmethod
    def load_words() -> dict:
        file = open('./words_dictionary.json')
        words_dict = json.load(file)
        print("Loaded words dictionary")
        SpellChecker.index_words_dictionary(word_dict=words_dict)
        return words_dict

    @staticmethod
    def index_words_dictionary(word_dict):
        index = 1
        for word in word_dict.keys():
            word_dict[word] = index
            index += 1

    def suggest_corrections(self, word: str) -> List[List[str]]:
        return self.spell_checker.correct_spell(input_string=word, max_edit_distance=3)


if __name__ == "__main__":
    spell_checker = SpellChecker()
    # with open("key_to_word.json", "w") as file:
    #     file.write(json.dumps(spell_checker.spell_checker.key_to_word_dictionary))
    # with open("edit_distance_dictionary.json", "w") as file:
    #     print(spell_checker.spell_checker.edit_distance_dictionary, file=file)
    # spell_checker.suggest_corrections(word="foward")

    misspelled_words = ['assessmen', 'resistanc', 'finallye', 'ascen', 'atrifact', 'avdise', 'auience', 'aggravat', 'prdferred', 'aproval', 'Caibbean', 'ppraisala', 'usua', 'remembe', 'thresholde', 'froward', 'foreseeabee', 'unfortunatel', 'visibee', 'apparatus', 'furthere', 'alleviate', 'asend', 'aequaintance', 'foward', 'hoorary', 'cemeter', 'assist', 'fmailiar', 'riendf', 'necessarye', 'Caribbea', 'futher', 'Farenheit', 'interrutt', 'eatherw', 'affiliate', 'amoun', 'ncestora', 'nonymousa', 'anomal', 'threfore', 'stationeyy', 'committeee', 'glmorous', 'aribbeanC', 'particulare', 'ufnoreseen', 'approva', 'artifac', 'aonnymous', 'tonguee', 'adltery', 'arifact', 'assembl', 'pproacha', 'abritrary', 'nthropologya', 'simiee', 'arbitrarye', 'preseverance', 'alost', 'onsciousc', 'annuale', 'accommodatee', 'anonymoss', 'asent', 'attract', 'utomatica', 'amateu', 'auctio', 'amphletp', 'ahcieve', 'lpllipop', 'asurance', 'immediatelye', 'aggressive', 'inidentally', 'separaee', 'amen', 'adviee', 'arrangement', 'calendare', 'aricle', 'bizaere', 'disappointe', 'accomplishe', 'assett', 'mlilennium', 'sttionery', 'arliamentp', 'aggravaee', 'rgumenta', 'fulorescent', 'ahrenheitF', 'affirmative', 'bsuiness', 'aqcuit', 'theista', 'acnestor', 'stationer', 'acceptable', 'accomplis', 'completel', 'assuranc', 'accidentayly', 'apparatuse', 'hmuorous', 'auhority', 'ccasionallyo', 'asumption', 'adulteyy', 'dvisea', 'altt', 'assessmett', 'ttributea', 'colleagee', 'claendar', 'auhor', 'mateur', 'beieve', 'approach', 'psatime', 'airthmetic', 'assumptione', 'attribute', 'nalysisa', 'omingc', 'ffecta', 'cemeteyy', 'nterrupti', 'wether', 'arithmeti', 'fruther', 'prnunciation', 'threshol', 'aamteur', 'uriosityc', 'irresistible', 'omorrowt', 'embarrasse', 'aspecte', 'committe', 'aspett', 'almos', 'foreig', 'assassination', 'hraass', 'appreciat', 'acution', 'automatice', 'appetitee', 'privileee', 'acrhitecture', 'honoyary', 'bleieve', 'vcauum', 'amunt', 'ascende', 'appraisal', 'aggressiee', 'cemeterye', 'familiare', 'believee', 'weathere', 'attitude', 'occasionallye', 'cknowledgmenta', 'aqcuaintance', 'aggressinn', 'eferredr', 'nalysis', 'tongu', 'astimep', 'authoriee', 'overnmentg', 'lollipope', 'curiositye', 'aggressivee', 'ergeants', 'rticulatea', 'recommen', 'apologiee', 'ariculate', 'perceivee', 'gainst', 'nfortunatelyu', 'comin', 'foreseeabl', 'dvicea', 'paallel', 'unfortunatelye', 'preferre', 'accomplihh', 'cmoing', 'incidentall', 'pamphlete', 'aleviate', 'atmospher', 'separatee', 'llegea', 'arument', 'anestor', 'cquaintancea', 'rresistiblei', 'atmospheee', 'urtherf', 'acidentally', 'apologiz', 'failiar', 'tnogue', 'assautt', 'assassi', 'arratgement', 'assis', 'definiteyy', 'knowledee', 'stationar', 'affec', 'assessmente', 'affect', 'allegiancee', 'cmomittee', 'appraisa', 'hpapened', 'xistencee', 'apparen', 'tongee', 'unforeseene', 'lppraisal', 'haras', 'preferrede', 'lleviatea', 'authorizee', 'dsiappoint', 'esctasy', 'receivee', 'autho', 'millenniu', 'tehrefore', 'raelly', 'adulterye', 'advis', 'abence', 'agression', 'authore', 'dfeinitely', 'chuffeur', 'acomplish', 'assumptio', 'achievee', 'ecytasy', 'idioyyncrasy', 'anniversary', 'immediately', 'comittee', 'analyee', 'glamorou', 'atheitt', 'anthropolog', 'arcthmetic', 'receiee', 'thereforee', 'eceiver', 'hapened', 'ccomplisha', 'ssignmenta', 'happene', 'assaul', 'assurancee', 'dulterya', 'amnd', 'rceeive', 'foreseeablee', 'attorney', 'approvale', 'neessary', 'ossessionp', 'llolipop', 'liise', 'atuomatic', 'acrosse', 'independen', 'bgeinning', 'assassnn', 'esistancer', 'ffirmativea', 'possessio', 'advic', 'necessayy', 'liais', 'bsaically', 'publicl', 'adise', 'amoutt', 'atnhropology', 'arithmetice', 'significan', 'nnuala', 'appreciatee', 'lota', 'arcoss', 'authentice', 'particula', 'visibl', 'affett', 'atachment', 'enses', 'occurrence', 'isappointd', 'religiouse', 'tationerys', 'surprisee', 'affirmatiee', 'ggressivea', 'occasionally', 'sigtificant', 'acknowledgmen', 'atuobiography', 'accommodate', 'atorney', 'aanlysis', 'ntoiceable', 'chauffeure', 'approahh', 'adress', 'auctinn', 'reallye', 'ememberr', 'diosyncrasyi', 'rceommend', 'sergeante', 'stationarye', 'acquiee', 'aproach', 'necessar', 'lpproval', 'architectur', 'aggression', 'twmorrow', 'referre', 'harasse', 'allegiance', 'nomalya', 'atrificial', 'diosyncrasy', 'caendar', 'coing', 'acquaintanc', 'acquite', 'ametdment', 'authrr', 'apparatss', 'cquita', 'Cnribbean', 'aritrary', 'consciou', 'atuhorize', 'charffeur', 'eginningb', 'incerelys', 'ahcievement', 'referrede', 'illenniumm', 'prvilege', 'vacuume', 'occasionayly', 'ggressiona', 'pnssession', 'anmaly', 'nvironmente', 'dliemma', 'ubliclyp', 'amende', 'onguet', 'finayly', 'acktowledgment', 'thletea', 'existencee', 'atlete', 'recommedd', 'bsencea', 'ttracta', 'tationarys', 'irresistibee', 'spearate', 'rseistance', 'apitude', 'weirdd', 'alleee', 'rtificiala', 'ceetery', 'annymous', 'arificial', 'religiou', 'allocate', 'antibioti', 'cquirea', 'vsiible', 'amaterr', 'advicee', 'patime', 'attachmen', 'simil', 'guardd', 'prnnunciation', 'crossa', 'allege', 'aspiratione', 'arrangemen', 'gvoernment', 'parliamente', 'ccidentallya', 'assassinatinn', 'occurrenc', 'paphlet', 'similee', 'sattionary', 'accomplish', 'arangement', 'authorit', 'all righte', 'attendance', 'llegiancea', 'across', 'frend', 'accommodaee', 'knowledg', 'amedd', 'appreciaee', 'aechitecture', 'presonnel', 'attrac', 'visiblee', 'utobiographya', 'ffiliatea', 'alegiance', 'automati', 'argumett', 'existenee', 'ectasy', 'foeign', 'ggravatea', 'articl', 'happenede', 'hauffeurc', 'all rigtt', 'rbitrarya', 'acieve', 'rdferred', 'assignmen', 'fnially', 'konwledge', 'perseveranc', 'scenta', 'aggressiv', 'agressive', 'praliament', 'independente', 'imediately', 'diappoint', 'arassh', 'tomorro', 'acreag', 'emeteryc', 'furthrr', 'governmente', 'reayly', 'religioss', 'aolt', 'assault', 'attituee', 'ortyf', 'smiilar', 'beginninge', 'atmospheree', 'busines', 'usinessb', 'alocate', 'begigning', 'analyzee', 'apreciate', 'artifacte', 'uardg', 'asault', 'sginificant', 'affiliat', 'govertment', 'accidentall', 'appeeite', 'acoss', 'belieee', 'aaginst', 'completelye', 'uthoritya', 'advisee', 'trheshold', 'pastiee', 'definitel', 'parallll', 'basicayly', 'acuumv', 'knwledge', 'curiosit', 'afirmative', 'ancestore', 'achieee', 'achievemente', 'annoye', 'aonmaly', 'agrument', 'knowledgee', 'anibiotic', 'curiosiyy', 'atosphere', 'millennimm', 'rfeerred', 'smiile', 'alleviaee', 'simila', 'assignmente', 'absenee', 'parallele', 'assemble', 'aceptable', 'atheis', 'annual', 'afect', 'apparett', 'acuit', 'guar', 'anniveysary', 'assembee', 'aparatus', 'cstasye', 'mbarrasse', 'noticeablee', 'allocat', 'sergean', 'pastimee', 'paticular', 'ccurrenceo', 'allocatee', 'trul', 'performanee', 'acuaintance', 'ssessmenta', 'business', 'goernment', 'nceessary', 'unforesee', 'pornunciation', 'toorrow', 'articee', 'ecstas', 'isiblev', 'acommodate', 'dilemm', 'approval', 'conscioss', 'allegianee', 'disappoin', 'allegee', 'erformancep', 'separat', 'specta', 'assignment', 'Fharenheit', 'probabyy', 'aemndment', 'atendance', 'furthe', 'articularp', 'asbence', 'foreigne', 'cceptablea', 'annyy', 'sensee', 'pparatusa', 'ssumptiona', 'aparent', 'affirmativ', 'analysise', 'uctiona', 'sergeatt', 'Fahrenhett', 'pmaphlet', 'porbably', 'apraisal', 'environmente', 'articlee', 'tmoorrow', 'audienc', 'nforeseenu', 'ascett', 'aggressione', 'basicallye', 'acros', 'immediateyy', 'ascente', 'aution', 'mendmenta', 'praticular', 'assemblee', 'apparent', 'governmen', 'performanc', 'huorous', 'appendi', 'dileama', 'irresistiblee', 'occasionall', 'segeant', 'aptitud', 'asser', 'ahteist', 'perseveranee', 'receiv', 'bziarre', 'rticlea', 'attratt', 'bizarree', 'rivilegep', 'acceptablee', 'al right', 'aptituee', 'calenda', 'incidentayly', 'firend', 'significante', 'hsmorous', 'erceivep', 'stationerye', 'togue', 'anniversarye', 'areiculate', 'perceiee', 'galmorous', 'anhropology', 'articulat', 'asignment', 'humorou', 'fortyy', 'lamorousg', 'attendanee', 'finall', 'ptitudea', 'againste', 'assurance', 'antibiotice', 'artifatt', 'referredp', 'appendxx', 'athletee', 'lollipo', 'irresistibl', 'auctione', 'cmeetery', 'inerrupt', 'appreciate', 'similare', 'istg', 'sincereyy', 'perseverancee', 'chievementa', 'achiev', 'uthora', 'wrather', 'atuhentic', 'nalyze', 'cominge', 'rtifacta', 'asert', 'apetite', 'familia', 'asiration', 'aspiratio', 'appendix', 'gainsta', 'nnoya', 'honorar', 'auomatic', 'reerred', 'assessment', 'trulyy', 'aggravatee', 'attachmett', 'reommend', 'approache', 'ppetitea', 'aniversary', 'performancee', 'theshold', 'apsiration', 'aetribute', 'inallyf', 'attribut', 'attachment', 'atuhor', 'probabl', 'arceage', 'deinitely', 'lnnual', 'arthmetic', 'interrup', 'fially', 'artificiale', 'againtt', 'analysi', 'umoroush', 'amounte', 'ttorneya', 'creagea', 'tomorrowe', 'assuranee', 'asassination', 'nniversarya', 'amlost', 'paliament', 'parliamen', 'aanlyze', 'frmiliar', 'affiliaee', 'atribute', 'acquaintancee', 'alote', 'oreignf', 'pronunciatio', 'pparenta', 'attornyy', 'ppreciatea', 'udiencea', 'forwarde', 'resistancee', 'rrangementa', 'authentcc', 'possessione', 'interrupte', 'probablye', 'atriculate', 'suprise', 'peseverance', 'ssaulta', 'beginnin', 'hnoorary', 'cahuffeur', 'noiceable', 'ccommodatea', 'cloleague', 'elieveb', 'aomunt', 'beinning', 'psosession', 'acsent', 'attracte', 'articulatee', 'Caribbeane', 'sttionary', 'athlet', 'privilegee', 'milennium', 'perferred', 'atitude', 'lmosta', 'asicallyb', 'eixstence', 'foreinn', 'unti', 'apparatu', 'believ', 'anual', 'Fahrenhei', 'embarras', 'usuall', 'anthropologye', 'pastim', 'reall', 'chievea', 'architecturee', 'uthentica', 'pprovala', 'copletely', 'automatcc', 'committee', 'disappoitt', 'imiles', 'accommodat', 'appraisale', 'audltery', 'Fahrenheite', 'embarrass', 'iresistible', 'autobiographye', 'ommitteec', 'acknowledgmente', 'atsist', 'weathe', 'ancestrr', 'asessment', 'icnidentally', 'acquir', 'searate', 'siilar', 'auhentic', 'acreagee', 'forwar', 'annoy', 'aduience', 'ndependenti', 'prbably', 'acievement', 'atpitude', 'ilemmad', 'fluorescente', 'resistanee', 'pamphle', 'gis', 'almott', 'appetit', 'ollipop', 'apsect', 'eligiousr', 'mounta', 'parliamett', 'millenniume', 'aybitrary', 'evnironment', 'arrangemente', 'll righta', 'noticeabee', 'cruiosity', 'assassinatio', 'nowledgek', 'reeive', 'eirdw', 'chauffeu', 'assigtment', 'efinitelyd', 'orwardf', 'oticeablen', 'alleviat', 'pologizea', 'pronunciatione', 'friende', 'attendanc', 'haass', 'apparente', 'assassinatione', 'authenti', 'appenedh', 'uthorizea', 'llocatea', 'autobiograph', 'atract', 'all righ', 'praallel', 'iaisel', 'pubyicly', 'ttitudea', 'autobiograpyy', 'asect', 'acceptabl', 'imilars', 'coleague', 'businesse', 'florescent', 'harass', 'approac', 'compyetely', 'itnerrupt', 'ssista', 'weir', 'mateura', 'foeseeable', 'amiliarf', 'assiste', 'glamoross', 'acsend', 'froeseeable', 'agravate', 'annua', 'acceptabee', 'attitudee', 'asemble', 'anonymouse', 'liaisee', 'reigious', 'argumente', 'argumen', 'alt', 'vacuu', 'ancesto', 'aptitudee', 'ahtlete', 'izarreb', 'snicerely', 'vacmum', 'analysss', 'untill', 'ncidentallyi', 'prferred', 'sicerely', 'accidentallye', 'spirationa', 'ssassina', 'biarre', 'publiclye', 'viible', 'onoraryh', 'analyz', 'anomalye', 'froeign', 'auobiography', 'acreaee', 'ntibiotica', 'incidentallye', 'hereforet', 'tmospherea', 'olleaguec', 'sincerelye', 'idiosyncras', 'eparates', 'ecessaryn', 'agains', 'apendix', 'ascedd', 'oreseeablef', 'happdned', 'sens', 'attendancee', 'idnependent', 'humorouse', 'all right', 'attributee', 'acqui', 'aggravate', 'buiness', 'rithmetica', 'almoste', 'crlendar', 'artificia', 'aspiratinn', 'theeefore', 'plrsonnel', 'ocasionally', 'pirvilege', 'alendarc', 'posession', 'allegianc', 'ntilu', 'amendmente', 'preformance', 'amtosphere', 'auyhority', 'perceiv', 'dilemmae', 'erseverancep', 'pulicly', 'sualu', 'rrmember', 'sincerel', 'reember', 'affiliatee', 'asassin', 'colleagu', 'atuhority', 'amndment', 'eallyr', 'adice', 'inependent', 'fodward', 'attorneye', 'waether', 'authoritye', 'anonymou', 'fluorescen', 'hresholdt', 'eurprise', 'diemma', 'pbulicly', 'cuiosity', 'friedd', 'acqutt', 'attitud', 'akcnowledgment', 'anthropoloyy', 'ollipopl', 'ebmarrass', 'peceive', 'vauum', 'luorescentf', 'recommende', 'peformance', 'noticeabl', 'ompletelyc', 'lrtificial', 'accidentally', 'unortunately', 'aggressio', 'aemnd']
    start_time = time.time()
    for misspelled_word in misspelled_words:
        spell_checker.suggest_corrections(word=misspelled_word)
    end_time = time.time()
    print("Time taken: ", end_time - start_time)
